# Updates the Website to match Main
#
# Triggered by:
# Updating the website folder in Main
# Manual Triggering
#

on:
  push:
    branches: ['main']
    paths: ['website/*']
  workflow_dispatch:

permissions:
  contents: write

name: Update Website

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout main branch
        uses: actions/checkout@v4
        with: 
          fetch-depth: 0
          path: root
    
      - name: Copy Website
        run: cp -r root/website .

      - name: check struct
        run: |
          cd root
          ls -la
          cd ..

      - name: Checkout Website
        uses: actions/checkout@v4
        with: 
          fetch-depth: 0
          path: web
      
      
      - name: Update Files
        run: cp -r website web

      - name: Setup Git user
        run: |
          cd web
          git config user.name "Github Actions"
          git config user.email "<EMAIL>"
      
      - name: Commit files
        run: |
          git add .
          git commit -m "Update Website"
          git push -u origin +website
          
         

      